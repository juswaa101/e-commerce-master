<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous" />
    <link href="https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    
   <!-- modal cdn -->
   <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
   <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
     
   <!-- datatables -->
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.2.0/css/bootstrap.min.css"></link>
   <link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap5.min.css">
   <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
   <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
   <script src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap5.min.js"></script>
   
    <title>Admin Products</title>

<style>
    * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    }

    body {
    min-height: 100vh;
    background-color: #fff;
    }

    .side-navbar {
    width: 250px;
    height: 100%;
    position: fixed;
    margin-left: -300px;
    background-color: #5765c1;
    transition: 0.5s;
    }

    .nav-link:active,
    .nav-link:focus,
    .nav-link:hover {
    background-color: #ffffff26;
    }

    .my-container {
    transition: 0.4s;
    }

    .active-nav {
    margin-left: 0;
    }

    /* for main section */
    .active-cont {
    margin-left: 250px;
    }

    #menu-btn {
    background-color: #5765c1;
    color: #fff;
    margin-left: -62px;
    }

    .my-container input {
    border-radius: 2rem;
    padding: 2px 20px;
    }
    .footer {
    position: absolute;
    bottom: 0;
    width: 100%;
    height: 2.5rem;
    padding-top: 1em;
    background-color: #5765c1;
    color: white;
  }
</style>
</head>

<body>
  <div class="side-navbar active-nav d-flex justify-content-between flex-wrap flex-column" id="sidebar">
    <ul class="nav flex-column text-white w-100">
      <a href="/adminDashboard" class="nav-link h3 text-white my-2">
        PC <b>Express</b>
      </a>
      <li>
        <a class="nav-link" href="/adminDashboard"style="text-decoration: none; color: white;">
            <i class="bx bxs-dashboard"></i>
            <span class="mx-2">Dashboard</span>
        </a>
      </li>
      <li>
        <a class="nav-link" href="/adminParts"style="text-decoration: none; color: white; background:#3E4CA7;">
            <i class="bx bxs-cart-add"></i>
            <span class="mx-2">Products</span>
        </a>
      </li>
      <li>
        <a
          class="nav-link"
          href="/adminCategories"
          style="text-decoration: none; color: white"
        >
          <i class="bx bxs-book"></i>
          <span class="mx-2">Categories</span>
        </a>
      </li>
      <li>
        <a class="nav-link" href="/adminOrders"style="text-decoration: none; color: white;">
            <i class='bx bxs-shopping-bags'></i>
            <span class="mx-2">Orders</span>
        </a>
      </li>
      <li>
        <a class="nav-link" href="/adminUsers"style="text-decoration: none; color: white;">
            <i class='bx bxs-user-check' ></i>
            <span class="mx-2">Users</span>
        </a>
      </li>
      <li>
        <a class="nav-link" href="/adminProfile"style="text-decoration: none; color: white;">
            <i class='bx bxs-user-circle' ></i>
            <span class="mx-2">Profile</span>
        </a>
      </li>
    </ul>
  </div>
  <div class="p-1 my-container active-cont">
    
    <nav class="navbar top-navbar navbar-light bg-light px-5">
      <a class="btn border-0" id="menu-btn"><i class="bx bx-menu"></i></a>
      <a href="/logout"><i class='bx bx-log-out'></i> </a>
    </nav>
   <br>
    <div style="margin-left: 1em;">
    <table >
      <td >
        <a style="text-decoration:none; color: #000; border-bottom:#5765c1 2px solid; border-radius:5px" href="/adminParts">Products</a>
      </td>
    </table>
    <br>
    <table id="example" class="text-center table table-striped table-bordered" style="width:100%">
      <thead>
        <button type="button" style="margin-bottom: 1em;"class="btn btn-primary" data-toggle="modal" data-target="#add">
          Add Product
        </button>

          <tr>
              <!-- <th>Image</th> -->
              <th>Image</th>
              <th>Item</th>
              <th>Description</th>
              <th>Category</th>
              <th>Price</th>
              <th>Qty</th>
              <th>Featured Product</th>
              <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <% result.forEach(element => { %>
          <tr>
              <td><img src="images/<%= element.img %>" height="100px" width="100px"></td>
              <td><%= element.item_name %></td>
              <td><%= element.description %></td>
              <td><%= element.category_name %></td>
              <td><%= element.price %></td>
              <td><%= element.qty %></td>
              <td><%= element.is_featured == 0 ? 'Inactive' : 'Active' %></td>
              <td><div class="row">
                <div class="col-md-12">
                  <form method="post">
                    <button
                      class="btn btn-warning w-100 editBtn"
                      data-id="<%= element.pid %>"
                    >
                      UPDATE
                    </button>
                  </form>
                </div>
                <div class="col-md-12 mt-3">
                  <form method="post">
                    <button
                      class="btn btn-danger deleteBtn w-100"
                      data-id="<%= element.pid %>"
                    >
                      DELETE
                    </button>
                  </form>
                </div>
              </div></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
    </div>

</div>

<!-- Adding Modal -->
<div class="modal fade" id="add" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title">Add Product </h5>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form method="post" id="addProductForm" enctype="multipart/form-data">
        <div class="mb-4">
          <label class="form-label">Image*</label>
          <input type="file" class="form-control" name="img" id="img" placeholder="Image" required/>
          <div class="invalid-feedback" id="image_error"></div>
        </div>

        <div class="mb-4">
          <label class="form-label">Item*</label>
          <input type="text" class="form-control" name="product" id="product" placeholder="Product Name" minlength="2"  required/>
          <div class="invalid-feedback" id="product_error"></div>
        </div>

        <div class="mb-4">
          <label class="form-label">Description*</label>
          <textarea name="desc" id="desc" class="form-control" rows="3" placeholder="Product Description" minlength="6" required></textarea>
          <div class="invalid-feedback" id="desc_error"></div>
        </div>

        <div class="mb-4">
          <label class="form-label">Category*</label>
          <select class="form-select" name="category" id="category">
            <% categories.forEach(element => { %>
             <option value="<%= element.id %>"><%= element.category_name %></option>
            <% }) %>
          </select>
          <div class="invalid-feedback" id="category_error"></div>
        </div>

        <div class="mb-4">
          <label class="form-label">Price*</label>
          <input type="number" class="form-control" name="price" id="price" min="1" placeholder="Price" required/>
          <div class="invalid-feedback" id="price_error"></div>
        </div>

        <div class="mb-4">
          <label class="form-label">Quantity*</label>
          <input type="number" class="form-control" name="qty" id="qty" min="1" placeholder="Quantity" required/>
          <div class="invalid-feedback" id="qty_error"></div>
        </div>

        <div class="navi" style="float: right;">
          <a class="btn" style="color: red;" data-dismiss="modal">Close</a>
          <button class="btn btn-success" id="btnAddProduct">Add Product</button>
          <!-- <button class="btn btn-success" type="submit"></button> -->
        </div>
      </form>
    </div>
  </div>
</div>
</div>

<!-- Edit Modal -->
<div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title">Edit Product</h5>
      <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <form method="post" id="editForm" enctype="multipart/form-data">
        <input type="hidden" class="form-control" name="id" id="edit_id" required/>
        <div class="mb-4">
          <label class="form-label">Image*</label>
          <input type="file" class="form-control" name="img" id="edit_img" placeholder="Image" required/>
          <div class="invalid-feedback" id="edit_image_error"></div>
        </div>

        <div class="mb-4">
          <label class="form-label">Item*</label>
          <input type="text" class="form-control" name="product" id="edit_product" placeholder="Product Name" minlength="2"  required/>
          <div class="invalid-feedback" id="edit_product_error"></div>
        </div>

        <div class="mb-4">
          <label class="form-label">Description*</label>
          <textarea name="desc" id="edit_desc" class="form-control" rows="3" placeholder="Product Description" minlength="6" required></textarea>
          <div class="invalid-feedback" id="edit_desc_error"></div>
        </div>

        <div class="mb-4">
          <label class="form-label">Category*</label>
          <select class="form-select" name="category" id="edit_category">
            <% categories.forEach(element => { %>
             <option value="<%= element.id %>"><%= element.category_name %></option>
            <% }) %>
            <div class="invalid-feedback" id="edit_category_error"></div>
          </select>
        </div>

        <div class="mb-4">
          <label class="form-label">Price*</label>
          <input type="number" class="form-control" name="price" id="edit_price" min="1" placeholder="Price" required/>
          <div class="invalid-feedback" id="edit_price_error"></div>
        </div>

        <div class="mb-4">
          <label class="form-label">Quantity*</label>
          <input type="number" class="form-control" name="qty" id="edit_qty" min="1" placeholder="Quantity" required/>
          <div class="invalid-feedback" id="edit_qty_error"></div>
        </div>

        <div class="mb-4">
          <label class="form-label">Featured*</label>
          <select class="form-select" name="featured" id="edit_featured" required>
            <option value=1>Active</option>
            <option value=0>Inactive</option>
          </select>
          <div class="invalid-feedback" id="edit_featured_error"></div>
        </div>

        <div class="navi" style="float: right;">
          <a class="btn" style="color: red;" data-bs-dismiss="modal">Close</a>
          <button class="btn btn-success updateBtn">Save Changes</button>
        </div>
      </form>
    </div>
  </div>
</div>
</div>

<!-- Delete Modal -->
<div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog" role="document">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title">Delete Product</h5>
      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <div class="modal-body">
      <center><h3>Delete this product?</h3></center>
      <hr>
      <form action="" method="post">
        <div class="navi" style="float: right;">
          <a class="btn" style="color: red;" data-dismiss="modal">Close</a>
          <button type="submit" class="btn btn-success">Delete</button>
        </div>
      </form>
    </div>
  </div>
</div>
</div>


<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>
</html>
<script src="/js/adminParts.js"></script>